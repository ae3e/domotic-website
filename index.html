<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>myHome</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

	<style type="text/css">
		html {
			height: 100%;
		}

		body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
</head>

<body>

	<div style=" height:100%;background-color: #fff;">
		<div style="margin:10px;">

			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">Capteur 1</div>
				<div style="margin:10px;">
					<div class="row" style='text-align: center'>
						<div class="col-md-2 col-xs-2"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="tem1">- °C</h2>
							<p>Température </p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="hum1">- %</h2>
							<p>Humidité</p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="bat1">- mV</h2>
							<p>Batterie</p>
						</div>
						<div class="col-md-2 col-xs-2"></div>
					</div>
				</div>
				<div class="row" style='text-align: center'>
					<p id="date1">YYYY-MM-DD HH:mm:ss</p>
				</div>
			</div>
			<br>

			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">Capteur 2</div>
				<div style="margin:10px;">
					<div class="row" style='text-align: center'>
						<div class="col-md-2 col-xs-2"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="tem2">- °C</h2>
							<p>Température </p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="hum2">- %</h2>
							<p>Humidité</p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="bat2">- %</h2>
							<p>Batterie</p>
						</div>
						<div class="col-md-2 col-xs-2"></div>
					</div>
				</div>
				<div class="row" style='text-align: center'>
					<p id="date2">YYYY-MM-DD HH:mm:ss</p>
				</div>
			</div>
			<br>

			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">Capteur 3</div>
				<div style="margin:10px;">
					<div class="row" style='text-align: center'>
						<div class="col-md-2 col-xs-2"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="tem3">- °C</h2>
							<p>Température </p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="hum3">- %</h2>
							<p>Humidité</p>
						</div>
						<div class="col-md-1 col-xs-1"></div>
						<div class="col-md-2 col-xs-2">
							<h2 id="bat3">- %</h2>
							<p>Batterie</p>
						</div>
						<div class="col-md-2 col-xs-2"></div>
					</div>
				</div>
				<div class="row" style='text-align: center'>
					<p id="date3">YYYY-MM-DD HH:mm:ss</p>
				</div>
			</div>
			<br>

			<input id="pwwd" name="mypassword" type="password" class="form-control pwd">
			<br />
			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">Scénarios</div>
				<div style="margin:10px;">
					<button type="button" onclick="doAction('767084','1')"
						class="btn btn-default btn-lg btn-block">Ouverture complète</button>
					<button type="button" onclick="doAction('767084','0')"
						class="btn btn-default btn-lg btn-block">Arrêt complet</button>
					<button type="button" onclick="doAction('767084','2')"
						class="btn btn-default btn-lg btn-block">Fermeture complète</button>
				</div>

			</div>
			<br>
			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">Pièces</div>




				<div style="margin:10px;" class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingOne">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
									aria-expanded="true" aria-controls="collapseOne">
									Bureau
								</a>
							</h4>
						</div>
						<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel"
							aria-labelledby="headingOne">
							<div class="panel-body" align="center">
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('803878','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('803878','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('803878','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingTwo">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
									aria-expanded="false" aria-controls="collapseTwo">
									Chambre d'amis
								</a>
							</h4>
						</div>
						<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingTwo">
							<div class="panel-body" align="center">
								<div>Fenêtre gauche</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('803876','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('803876','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('803876','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
								<div><br></div>
								<div>Fenêtre droite</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('916999','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('916999','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('916999','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>

							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
									href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
									Salle de bain
								</a>
							</h4>
						</div>
						<div id="collapseThree" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('917005','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('917005','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('917005','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
									href="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
									Chambre des parents
								</a>
							</h4>
						</div>
						<div id="collapseFour" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div>Fenêtre gauche</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('917003','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('917003','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('917003','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
								<div><br></div>
								<div>Fenêtre droite</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('917004','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('917004','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('917004','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>

							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
									href="#collapseFive" aria-expanded="false" aria-controls="collapseThree">
									Chambre d'Elise
								</a>
							</h4>
						</div>
						<div id="collapseFive" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('148132','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('148132','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('148132','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseSix"
									aria-expanded="false" aria-controls="collapseThree">
									Chambre d'Adèle
								</a>
							</h4>
						</div>
						<div id="collapseSix" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('937619','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('937619','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('937619','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
									href="#collapseSeven" aria-expanded="false" aria-controls="collapseThree">
									Salon
								</a>
							</h4>
						</div>
						<div id="collapseSeven" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('925191','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('925191','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('925191','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingThree">
							<h4 class="panel-title">
								<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
									href="#collapseEight" aria-expanded="false" aria-controls="collapseThree">
									Cuisine
								</a>
							</h4>
						</div>
						<div id="collapseEight" class="panel-collapse collapse" role="tabpanel"
							aria-labelledby="headingThree">
							<div class="panel-body" align="center">
								<div>Fenêtre gauche</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('916998','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('916998','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('916998','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>
								<div><br></div>
								<div>Fenêtre droite</div>
								<div class="btn-group btn-group-lg" role="group" aria-label="...">
									<button type="button" onclick="doAction('937621','2')"
										class="btn btn-default">&nbsp;<img src="img/down.png">&nbsp;</button>
									<button type="button" onclick="doAction('937621','0')"
										class="btn btn-default">&nbsp;<img src="img/stop.png">&nbsp;</button>
									<button type="button" onclick="doAction('937621','1')"
										class="btn btn-default">&nbsp;<img src="img/up.png">&nbsp;</button>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
			<br>

			<div class="panel panel-primary">
				<!-- Default panel contents -->
				<div class="panel-heading">NAS</div>
				<div style="margin:10px;">
					<button type="button" onclick="doWOL()" class="btn btn-default btn-lg btn-block">Réveiller</button>
					<!--<button type="button" onclick="/nas/shutdown" class="btn btn-default btn-lg btn-block">Arrêter</button>
					<button type="button" onclick="/nas/reboot" class="btn btn-default btn-lg btn-block">Redémarrer</button>-->
				</div>

			</div>
		</div>
	</div>


	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script>
		function doWOL() {
			document.getElementById('iframe').src = "/nas/wol";
		}

		(async () => {
			let response = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vTOv1cLBsjEvUg0TkKNK2YlIGg0_R9vxmGCGLJyx71Qhn3B5OFu27wSqK8FUcWnjUIcYmX10hn2p4pQ/pub?gid=1205536934&single=true&output=csv");
			let lastdata = await response.text();
			let rows = lastdata.split('\n');
			let values = rows[1].split(',');
			document.getElementById("tem1").innerHTML = values[1] + "°C";
			document.getElementById("hum1").innerHTML = values[2] + "%";
			document.getElementById("bat1").innerHTML = values[3] + "mV";
			document.getElementById("date1").innerHTML = new Date(parseInt(values[0])).toLocaleString("fr");

			document.getElementById("tem2").innerHTML = values[5] + "°C";
			document.getElementById("hum2").innerHTML = values[6] + "%";
			document.getElementById("bat2").innerHTML = values[7] + "%";
			document.getElementById("date2").innerHTML = new Date(parseInt(values[4])).toLocaleString("fr");

			document.getElementById("tem3").innerHTML = values[9] + "°C";
			document.getElementById("hum3").innerHTML = values[10] + "%";
			document.getElementById("bat3").innerHTML = values[11] + "%";
			document.getElementById("date3").innerHTML = new Date(parseInt(values[8])).toLocaleString("fr");
		})()

		async function doAction(id, action) {
			let response = await fetch(
				'https://script.google.com/macros/s/AKfycbwSqg2TjWXcgUJo16HtAFUVkR7LmraOMxu24HuMfFJ2_5CpuMbA/exec?shutterId=' +
				id + '&action=' + action + '&token=' + $(".pwd").val()
			);
			let data = await response.json();
			console.log(data);
		}
	</script>
</body>

</html>